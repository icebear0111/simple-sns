# 간단한 SNS 개발하기

## 요구사항 분석
- Feed Page
  - 제목, 작성자, 본문의 정보가 필요하다.
  - 모든 유저의 글을 확인할 수 있다.
  - 고려해야 할 것:
    - 어떤 기준으로 목록이 정렬되는가?
    - 처음에 몇개의 피드를 보여줘야 하는가?
    - 페이징 처리 시, 한 페이지에 몇개의 피드를 보여줄 것인가?
- Write Post Page
  - 제목과 본문을 작성할 수 있다.
- Sign Up Page
  - Username과 Password로 가입한다.
- Login Page
  - 앞서 가입한 Username과 Password로 로그인한다.
- My Post Page
  - 제목, 작성자, 본문의 정보가 필요하다.
  - 수정 버튼을 통해 제목 또는 본문을 수정할 수 있다.
  - 삭제 버튼을 통해 피드를 삭제할 수 있다.
    - 삭제 시 피드는 더 이상 존재하지 않는다.

## API
- Post List API
  - 모드 유저의 피드를 모아서 보여준다
  - 페이징 및 정렬
  - 제목, 작성자, 본문 제공
- Post Create API
  - 제목과 본문을 이용해 포스트 작성
- User Sign Up API
  - Username과 Password를 이용하여 회원가입
- User Sign In API
  - Username과 Password를 이용하여 로그인
- My Post API
  - 로그인 한 유저의 피드를 모아서 보여준다
  - 페이징 및 정렬
  - 제목, 작성자, 본문 제공
- Post Delete API
  - 피드 삭제
- Post Modify API
  - 제목 또는 본문 수정

## 데이터베이스
### 데이터베이스의 종류
- 대용량 데이터를 위한 데이터베이스: HBASE, Cassandra
- 데이터 분석에 용이한 데이터베이스: Druid
- 관계형 데이터에 용이한 데이터베이스: PostgreSQL, MySQL
- 비관계형 데이터에 용이한 데이터베이스: redis, MongoDB, CouchDB

### 관계형 데이터베이스 vs 비관계형 데이터베이스
|   |관계형 데이터베이스(RDBMS)| 비관계형 데이터베이스(NOSQL)   |
|---|---------------------|----------------------|
|특징|데이터를 행과 열로 된 관계의 테이블 형태로 저장하는 것이 특징<br/>모든 데이터를 하나의 표처럼 나타낼 수 있음<br/>고정된 스키마를 가지고 있으며 이를 이용해 질의하여 데이터를 가지고 올 수 있음|데이터들의 관계를 저장하는 것이 아닌 저장 자체에 초점을 둔 데이터베이스<br/>문서형이나 key-value형이 있음|
|장점|SQL을 통해 데이터를 쉽게 질의하여 가지고 올 수 있음|유연성이 뛰어나며 빠르게 데이터를 가지고 올 수 있음<br/>수평 확장에 용이|
|단점|데이터의 관계가 복잡할 경우 다수의 JOIN이 발생하여 성능에 영향을 줄 수 있음<br/>수평 확장에 불리|질의하기 어려움<br/>다수의 업데이트가 일어나는 경우 성능측면에서 불리|
- 서비스의 특성에 맞는 데이터베이스 중에서도 팀내 운영 경험이 있거나 문제가 생겼을 경우 trouble shooting에 용이하도록 reference가 많은 데이터베이스를 고르는 것이 좋다.

### 데이터베이스 선택
- 이번 프로젝트는 하나의 유저가 하나의 포스트를 작성했다는 명확한 관계가 있기 때문에 관계형 데이터베이스(RDBMS)가 적절하다.
- RDBMS 중에서도 이번 프로젝트에서 사용할 Heroku가 무료로 제공하는 PostgreSQL을 선택했다.

## 인증(Authentication)과 인가(Authorization)
### 정의
#### 인증(Authentication)
- 회원가입이나 로그인처럼 내가 누구인지를 보여주는 것
#### 인가(Authorization)
- 내가 권환이 있는지를 확인하는 것
### Authorization은 왜 필요할까?
- 유저 1이 비공개로 글을 작성한다면 해당 글을 접근하고 볼 수 있는 사람은 유저 1만 가능하다.
- 비공개 글에 대한 권한은 유저 1에게만 있기 때문.
- 따라서 해당 글에 어떠한 유저가 접근하게 된다면 그 사람이 유저 1인지를 반드시 확인하는 작업이 필요하다.
### Authorization 방법
- 아이디/비밀번호를 통한 Authorization
  - 매 요청마다 아이디와 비밀번호를 받아서 해당 요청을 한 사람이 접근하고자 하는 것에 대해 권한이 있는지 확인할 수 있.
  - 하지만, 매 요청마다 아이디와 비밀번호를 전송하게 된다면 유출의 위험이 있다.
- 임의의 문자열을 통한 Authorization
  - 유저마다 특정 문자열을 발급해주거나 문자열에 유저의 정보를 암호화하여 담아 이를 통해 유저를 식별한다.
  - 이 또한 임의의 문자열이 유출될 가능성이 있다.
  - 하지만, 이 문자열에 유효한 시간을 걸어 실제 아이디와 비밀번호를 아는 유저만 매번 유효한 문자열을 받을 수 있도록 설정한다면 비교적 안전하게 Authorization을 할 수 있다.
### JWT(JSON Web Token)
- 문자열을 사용한 Authorization의 방법 중 하나이다.
- 모바일이나 웹의 사용자 인증을 통해 사용되는 암호화된 토큰을 뜻한다.
- Spring Security에서 JWT를 지원한다.

## 전체적인 아키텍쳐

![Overall Architecture](./architecture.png)